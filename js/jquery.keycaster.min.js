/*
 * Keycaster v1.1 minified
 * By Rob Garrison (aka Mottie & Fudgey)
 * Dual licensed under the MIT and GPL licenses.
 *
 */
 
(function(d){keycaster=function(j){d("#keycaster").length||d('<ul id="keycaster"></ul>').appendTo("body");var a=d("#keycaster")[0];a.$el=d("#keycaster");a.$el.data("key",a);a.init=function(){if(!a.initialized){a.options=d.extend({},keycaster.defaultOptions,j);a.keys=d.extend({},keycaster.keys,j);a.lasttext="";a.doc=d(document);a.webkit=d.browser.webkit;a.$el.hide();a.doc.bind("keydown",function(b){var c=b.which;if(!(c===a.lastKey&&(c>15&&c<19||c>90&&c<94)||!a.options.showShift&&c===16)){a.lastKey= c;a.updateDisplay(b,c,false)}}).bind("mousedown",function(b){if(a.webkit&&b.target.tagName==="SELECT")a.rotateImg(b.timeStamp,b.pageX,b.pageY,b.shiftKey?true:false)}).bind("mouseup",function(b){a.rotateImg(b.timeStamp,b.pageX,b.pageY,b.shiftKey?true:false)});a.doc.bind("keyup",function(b){if(a.options.showUnKey){var c=b.which;if(!(!a.options.showShift&&c===16))if(c>15&&c<19||c>90&&c<93){a.lastKey=null;a.updateDisplay(b,c,true)}}});a.initialized=true}};a.updateDisplay=function(b,c,h){clearTimeout(a.timer); a.timer=setTimeout(a.clearDisplay,a.options.displayTime);a.$el.show();var e=a.keys[c],f=a.options.abbrevName?1:0,k=typeof e!=="undefined",g=b.ctrlKey||b.altKey,i=b.shiftKey?String.fromCharCode(b.keyCode):String.fromCharCode(b.keyCode).toLowerCase();g=d("<"+a.options.keyWrapper+"/>").addClass("keycasterKey "+(g||k?a.options.namedKey:a.options.regKey));if(k){i=h?a.options.unMessage:"";i+=b.shiftKey?e[2]||e[f]:e[f]}g.html(i);if(!a.options.showBksp&&c===8){a.$el.find(a.options.keyWrapper+":last").remove(); g=null}a.$el.find("li").length===0&&a.$el.append("<li><span></span></li>");a.$el.find("li:last > span").append(g);if(a.$el.find("li:last > span").outerWidth()>a.$el.find("li:last").innerWidth()){a.$el.find("li:last > span").find(a.options.keyWrapper+":last").remove();a.$el.append("<li><span></span></li>").find("li:last > span").append(g)}if(c===13||c===27||c===9)a.$el.append("<li><span></span></li>");a.$el.find("li").length>a.options.lines&&a.$el.find("li:first").remove()};a.clearDisplay=function(){a.$el.find("li:first").remove(); if(a.$el.find("li").length===0||a.$el.find("li").text()===""){clearTimeout(a.timer);a.$el.hide()}else a.timer=setTimeout(a.clearDisplay,a.options.displayTime)};a.rotateImg=function(b,c,h,e){d("#clicked"+b).length||d('<div id="clicked'+b+'" data-num="0"></div>').addClass(e?"underArea":"clickedArea").css({background:"transparent url("+a.options.imgUrl+") no-repeat 0 0",height:a.options.imgsize,width:a.options.imgsize,position:"absolute",left:c-a.options.imgsize/2,top:h-a.options.imgsize/2}).appendTo("body"); e=d("div#clicked"+b);var f=parseInt(e.attr("data-num"),10)+1;if(f<=a.options.imgFrames){e.css("background-position","-"+a.options.imgsize*f+"px 0").attr("data-num",f);setTimeout(function(){a.rotateImg(b,c,h)},a.options.imgtime)}else e.remove()};a.init()};keycaster.defaultOptions={abbrevName:true,lines:4,displayTime:1500,showShift:false,showUnKey:false,showBksp:false,unMessage:"Un-",imgUrl:"images/click-blue.png",imgFrames:6,imgsize:150,imgtime:75,keyWrapper:"kbd",namedKey:"namedKeys",regKey:"regKeys"}; keycaster.keys={8:["Backspace",d.browser.msie?"Bksp":"\u232b"],9:["Tab","\u21b9"],12:["Numpad 5","5"],13:["Enter","\u21b5"],16:["Shift","\u21e7"],17:["Control","\u273c"],18:["Alt",d.browser.msie?"Alt":"\u2325"],19:["Break","Break","Pause"],20:["Caps Lock","\u21ea"],27:["Escape","Esc"],32:["Space","&nbsp;"],33:["Page Up","PgUp"],34:["Page Down","PgDwn"],35:["End","End"],36:["Home","Home"],37:["Left","\u2190"],38:["Up","\u2191"],39:["Right","\u2192"],40:["Down","\u2193"],44:["Print Screen","PrtScn"], 45:["Insert","Ins"],46:["Delete","Del"],48:["0","0",")"],49:["1","1","!"],50:["2","2","@"],51:["3","3","#"],52:["4","4","$"],53:["5","5","%"],54:["6","6","^"],55:["7","7","&amp;"],56:["8","8","*"],57:["9","9","("],59:[";",";",":"],91:["Command (left)",navigator.appVersion.indexOf("Mac")!==-1?"\u2318":"Win"],92:["Command (right)",navigator.appVersion.indexOf("Mac")!==-1?"\u2318":"Win"],93:["Menu Select","Sel"],96:["Numpad 0","0"],97:["Numpad 1","1"],98:["Numpad 2","2"],99:["Numpad 3","3"],100:["Numpad 4", "4"],101:["Numpad 5","5"],102:["Numpad 6","6"],103:["Numpad 7","7"],104:["Numpad 8","8"],105:["Numpad 9","9"],106:["Multiply","*"],107:["=","=","+"],108:["Numpad Enter","\u21b5"],109:["Subtract","-","_"],110:["Numpad Decimal","."],111:["Divide","/"],112:["Help (F1)","F1"],113:["F2","F2"],114:["F3","F3"],115:["F4","F4"],116:["Reload (F5)","F5"],117:["F6","F6"],118:["F7","F7"],119:["F8","F8"],120:["F9","F9"],121:["F10","F10"],122:["Full Screen (F11)","F11"],123:["F12","F12"],144:["Num Lock","NmLk"], 145:["Scroll Lock","ScrLk"],186:[";",";",":"],187:["=","=","+"],188:["Comma",",","&lt;"],189:["Dash","-","_"],190:["Period",".","&gt;"],191:["/","/","?"],192:["`","`","~"],193:["~","~"],219:["[","[","{"],220:["\\","\\","|"],221:["]","]","}"],222:["'","'","&quot;"]}})(jQuery);
